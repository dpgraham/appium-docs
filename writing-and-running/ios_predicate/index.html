<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Ios predicate - Appium</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Appium</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About appium <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../about-appium/appium-clients/">Appium clients</a>
</li>
                            
<li >
    <a href="../../about-appium/intro/">Intro</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../advanced/chromedriver/">Chromedriver</a>
</li>
                            
<li >
    <a href="../../advanced/cross-domain-iframes/">Cross domain iframes</a>
</li>
                            
<li >
    <a href="../../advanced/event-timings/">Event timings</a>
</li>
                            
<li >
    <a href="../../advanced/grid/">Grid</a>
</li>
                            
<li >
    <a href="../../advanced/hybrid/">Hybrid</a>
</li>
                            
<li >
    <a href="../../advanced/ios-touch-id/">Ios touch id</a>
</li>
                            
<li >
    <a href="../../advanced/ios-webkit-debug-proxy/">Ios webkit debug proxy</a>
</li>
                            
<li >
    <a href="../../advanced/iwd_xcode7/">Iwd xcode7</a>
</li>
                            
<li >
    <a href="../../advanced/migrating-to-1-0/">Migrating to 1 0</a>
</li>
                            
<li >
    <a href="../../advanced/migrating-to-xcuitest/">Migrating to xcuitest</a>
</li>
                            
<li >
    <a href="../../advanced/settings/">Settings</a>
</li>
                            
<li >
    <a href="../../advanced/wda-custom-server/">Wda custom server</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../contributing/appium-from-source/">Appium from source</a>
</li>
                            
<li >
    <a href="../../contributing/appium-packages/">Appium packages</a>
</li>
                            
<li >
    <a href="../../contributing/credits/">Credits</a>
</li>
                            
<li >
    <a href="../../contributing/developers-overview/">Developers overview</a>
</li>
                            
<li >
    <a href="../../contributing/gulp/">Gulp</a>
</li>
                            
<li >
    <a href="../../contributing/how-to-write-docs/">How to write docs</a>
</li>
                            
<li >
    <a href="../../contributing/style-guide-2.0/">Style guide 2.0</a>
</li>
                            
<li >
    <a href="../../contributing/style-guide/">Style guide</a>
</li>
                            
<li >
    <a href="../../contributing/version-branch-release/">Version branch release</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../setup/android-hax-emulator/">Android hax emulator</a>
</li>
                            
<li >
    <a href="../../setup/android-setup/">Android setup</a>
</li>
                            
<li >
    <a href="../../setup/ios-deploy/">Ios deploy</a>
</li>
                            
<li >
    <a href="../../setup/parallel_tests/">Parallel tests</a>
</li>
                            
<li >
    <a href="../../setup/platform-support/">Platform support</a>
</li>
                            
<li >
    <a href="../../setup/real-devices-android/">Real devices android</a>
</li>
                            
<li >
    <a href="../../setup/real-devices-ios/">Real devices ios</a>
</li>
                            
<li >
    <a href="../../setup/real-devices/">Real devices</a>
</li>
                            
<li >
    <a href="../../setup/running-on-linux/">Running on linux</a>
</li>
                            
<li >
    <a href="../../setup/running-on-osx/">Running on osx</a>
</li>
                            
<li >
    <a href="../../setup/running-on-windows/">Running on windows</a>
</li>
                            
<li >
    <a href="../../setup/troubleshooting/">Troubleshooting</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Writing and running <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../appium-bindings/">Appium bindings</a>
</li>
                            
<li >
    <a href="../caps/">Caps</a>
</li>
                            
<li >
    <a href="../default-capabilities-arg/">Default capabilities arg</a>
</li>
                            
<li >
    <a href="../espresso/">Espresso</a>
</li>
                            
<li >
    <a href="../finding-elements/">Finding elements</a>
</li>
                            
<li >
    <a href="../ios-xctest-mobile-gestures/">Ios xctest mobile gestures</a>
</li>
                            
<li class="active">
    <a href="./">Ios predicate</a>
</li>
                            
<li >
    <a href="../mobile-web/">Mobile web</a>
</li>
                            
<li >
    <a href="../network_connection/">Network connection</a>
</li>
                            
<li >
    <a href="../reset-strategies/">Reset strategies</a>
</li>
                            
<li >
    <a href="../running-tests/">Running tests</a>
</li>
                            
<li >
    <a href="../safari-launcher/">Safari launcher</a>
</li>
                            
<li >
    <a href="../server-args/">Server args</a>
</li>
                            
<li >
    <a href="../touch-actions/">Touch actions</a>
</li>
                            
<li >
    <a href="../uiautomator2/">Uiautomator2</a>
</li>
                            
<li >
    <a href="../uiautomator_uiselector/">Uiautomator uiselector</a>
</li>
                            
<li >
    <a href="../unicode/">Unicode</a>
</li>
                            
<li >
    <a href="../windows-app-testing/">Windows app testing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../ios-xctest-mobile-gestures/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../mobile-web/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#ios-predicate">iOS Predicate</a></li>
            <li><a href="#basic-comparisons">Basic Comparisons</a></li>
            <li><a href="#boolean-value-predicates">Boolean Value Predicates</a></li>
            <li><a href="#basic-compound-predicates">Basic Compound Predicates</a></li>
            <li><a href="#string-comparisons">String Comparisons</a></li>
            <li><a href="#aggregate-operations">Aggregate Operations</a></li>
            <li><a href="#identifiers">Identifiers</a></li>
            <li><a href="#literals">Literals</a></li>
            <li><a href="#reserved-words">Reserved Words</a></li>
            <li><a href="#appium-predicate-helpers">Appium predicate helpers</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="ios-predicate">iOS Predicate</h2>
<p><em>NOTE</em>: iOS predicates are usable in iOS 9.3 and below using the <code>-ios uiautomation</code> locator strategy and they are usable in iOS 10 and above using the <code>-ios predicate string</code> locator strategy</p>
<p>It is worth looking at <em>'-ios uiautomation'</em> search strategy with <strong>Predicates</strong>.
<a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/">UIAutomation JavaScript API</a> has following methods which can are very useful.</p>
<pre><code class="center">(UIAElement) UIAElementArray.firstWithPredicate(PredicateString predicateString)
(UIAElementArray) UIAElementArray.withPredicate(PredicateString predicateString)
</code></pre>

<p>Native JS search strategy (powered by Apple) provides much more flexibility and is like Xpath.
<strong><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html">Predicates</a></strong> can be used to restrict an elements set to select only those ones for which some condition is true.</p>
<p>'-ios uiautomation' example:</p>
<pre><code class="java">// java
appiumDriver.findElementsByIosUIAutomation(&quot;collectionViews()[0].cells().withPredicate(\&quot;ANY staticTexts.isVisible == TRUE\&quot;)&quot;);
</code></pre>

<p>'-ios predicate string' example:</p>
<pre><code class="java">// java
appiumDriver.findElementsByIosNsPredicate(&quot;isWDVisible == 1&quot;);
</code></pre>

<p>-  will select only those  <code>UIACollectionCell</code> elements that have visible <code>UIAStaticText</code> child elements, and themselves are childs of 1st <code>UIACollectionView</code> element that should be located under the main app window.  Here <code>staticTexts()</code> and <code>isVisible()</code> are methods available in <code>UIAElementArray</code> and <code>UIAElement</code> classes respectively. <strong>Note that <code>UIAElementArray</code> numbering begins with <code>0</code> unlike Xpath where indexes counting starts from <code>1</code></strong></p>
<p>Here's a list of available Predicates (mostly taken from <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html">Predicates Programming Guide</a>)</p>
<h3 id="basic-comparisons">Basic Comparisons</h3>
<p>= , ==
- The left-hand expression is equal to the right-hand expression:</p>
<pre><code class="center">tableViews()[1].cells().firstWithPredicate(&quot;label == 'Olivia' &quot;)

same in Xpath: /UIATableView[2]/UIATableCell[@label = 'Olivia'][1]
</code></pre>

<p>>= , =>
- The left-hand expression is greater than or equal to the right-hand expression.</p>
<p>&lt;= , =&lt;
- The left-hand expression is less than or equal to the right-hand expression.</p>
<p>>
- The left-hand expression is greater than the right-hand expression.</p>
<p>&lt;
- The left-hand expression is less than the right-hand expression.</p>
<p>!= , &lt;>
- The left-hand expression is not equal to the right-hand expression.</p>
<p>BETWEEN
- The left-hand expression is between, or equal to either of, the values specified in the right-hand side. The right-hand side is a two value array (an array is required to specify order) giving upper and lower bounds. For example, <code>1 BETWEEN { 0 , 33 }</code>, or <code>$INPUT BETWEEN { $LOWER, $UPPER }</code>.
In Objective-C, you could create a BETWEEN predicate as shown in the following example:</p>
<pre><code class="center">NSPredicate *betweenPredicate =
    [NSPredicate predicateWithFormat: @&quot;attributeName BETWEEN %@&quot;, @[@1, @10]];
</code></pre>

<p>This creates a predicate that matches <code>( ( 1 &lt;= attributeValue ) &amp;&amp; ( attributeValue &lt;= 10 ) )</code></p>
<h3 id="boolean-value-predicates">Boolean Value Predicates</h3>
<p>TRUEPREDICATE
- A predicate that always evaluates to <code>TRUE</code> .</p>
<p>FALSEPREDICATE
- A predicate that always evaluates to <code>FALSE</code>.</p>
<h3 id="basic-compound-predicates">Basic Compound Predicates</h3>
<p>AND , &amp;&amp;
- Logical AND.</p>
<p>OR , ||
- Logical OR.</p>
<p>NOT , !
- Logical NOT.</p>
<h3 id="string-comparisons">String Comparisons</h3>
<p>String comparisons are by default case and diacritic sensitive. You can modify an operator using the key characters <code>c</code> and <code>d</code> within square braces to specify case and diacritic insensitivity respectively, for example <code>firstName BEGINSWITH[cd] $FIRST_NAME</code></p>
<p>BEGINSWITH
- The left-hand expression begins with the right-hand expression.</p>
<pre><code class="center">scrollViews()[3].buttons().firstWithPredicate(&quot;name BEGINSWITH 'results toggle' &quot;)

same in Xpath: /UIAScrollView[4]/UIAButton[starts-with(@name, 'results toggle')][1]
</code></pre>

<p>CONTAINS
- The left-hand expression contains the right-hand expression.</p>
<pre><code class="center">tableViews()[1].cells().withPredicate(&quot;ANY collectionViews[0].buttons.name CONTAINS 'opera'&quot;)

same in Xpath: /UIATableView[2]/UIATableCell[UIACollectionView[1]/UIAButton[contains(@name, 'opera')]]
</code></pre>

<p>ENDSWITH
- The left-hand expression ends with the right-hand expression.</p>
<p>LIKE
- The left hand expression equals the right-hand expression: ? and * are allowed as wildcard characters, where ? matches 1 character and * matches 0 or more characters. In Mac OS X v10.4, wildcard characters do not match newline characters.</p>
<pre><code class="center">tableViews()[0].cells().firstWithPredicate(&quot;name LIKE '*Total: $*' &quot;)

same in Xpath: /UIATableView[1]/UIATableCell[matches(@name, '.*Total: \$.*')][1]
</code></pre>

<p>MATCHES
- The left hand expression equals the right hand expression using a regex -style comparison according to ICU v3 (for more details see the ICU User Guide for <a href="http://userguide.icu-project.org/strings/regexp">Regular Expressions</a>).</p>
<pre><code class="center">tableViews().firstWithPredicate(&quot;value MATCHES '.*of 7' &quot;)

same in Xpath: /UIATableView[matches(@value, '.*of 7')][1]
</code></pre>

<h3 id="aggregate-operations">Aggregate Operations</h3>
<p>ANY , SOME
- Specifies any of the elements in the following expression. For example <code>ANY children.age &lt; 18</code> .</p>
<pre><code class="center">tableViews()[0].cells().firstWithPredicate(&quot;SOME staticTexts.name = 'red'&quot;).staticTexts().withName('red')

same in Xpath: /UIATableView[1]/UIATableCell[UIAStaticText/@name = 'red'][1]/UIAStaticText[@name = 'red']
</code></pre>

<p>ALL
- Specifies all of the elements in the following expression. For example <code>ALL children.age &lt; 18</code> .</p>
<p>NONE
- Specifies none of the elements in the following expression. For example, <code>NONE children.age &lt; 18</code> . This is logically equivalent to <code>NOT (ANY ...)</code> .</p>
<p>IN
- Equivalent to an SQL IN operation, the left-hand side must appear in the collection specified by the right-hand side. For example, <code>name IN { 'Ben', 'Melissa', 'Matthew' }</code> . The collection may be an array, a set, or a dictionary—in the case of a dictionary, its values are used.</p>
<p>array[index]
- Specifies the element at the specified index in the array.</p>
<p>array[FIRST]
- Specifies the first element in the array.</p>
<p>array[LAST]
- Specifies the last element in the array.</p>
<p>array[SIZE]
- Specifies the size of the array</p>
<pre><code class="center">elements()[0].tableViews()[0].cells().withPredicate(&quot;staticTexts[SIZE] &gt; 2&quot;)
same in Xpath: /*[1]/UIATableView[1]/UIATableCell[count(UIAStaticText) &gt; 2]
</code></pre>

<h3 id="identifiers">Identifiers</h3>
<p><strong>C style identifier</strong>
- Any C style identifier that is not a reserved word.</p>
<p><strong>#symbol</strong>
- Used to escape a reserved word into a user identifier.</p>
<p><strong>[\]{octaldigit}{3}</strong>
- Used to escape an octal number ( <code>\</code> followed by 3 octal digits).</p>
<p><strong>[\][xX]{hexdigit}{2}</strong>
- Used to escape a hex number ( <code>\x</code> or <code>\X</code> followed by 2 hex digits).</p>
<p><strong>[\][uU]{hexdigit}{4}</strong>
- Used to escape a Unicode number ( <code>\u</code> or <code>\U</code> followed by 4 hex digits).</p>
<h3 id="literals">Literals</h3>
<p>Single and double quotes produce the same result, but they do not terminate each other. For example, <code>"abc"</code> and <code>'abc'</code> are identical, whereas <code>"a'b'c"</code> is equivalent to a space-separated concatenation of <code>a, 'b', c</code>.</p>
<p>FALSE , NO
- Logical false.</p>
<p>TRUE , YES
- Logical true.</p>
<p>NULL , NIL
- A null value.</p>
<p>SELF
- Represents the object being evaluated.</p>
<p>"text"
- A character string.</p>
<p>'text'
- A character string.</p>
<p><strong>Comma-separated literal array</strong>
- For example, <code>{ 'comma', 'separated', 'literal', 'array' }</code> .</p>
<p><strong>Standard integer and fixed-point notations</strong>
- For example, <code>1 , 27 , 2.71828 , 19.75</code> .</p>
<p><strong>Floating-point notation with exponentiation</strong>
- For example, <code>9.2e-5</code> .</p>
<p>0x
- Prefix used to denote a hexadecimal digit sequence.</p>
<p>0o
- Prefix used to denote an octal digit sequence.</p>
<p>0b
- Prefix used to denote a binary digit sequence.</p>
<h3 id="reserved-words">Reserved Words</h3>
<p>The following words are reserved:</p>
<p><code>AND, OR, IN, NOT, ALL, ANY, SOME, NONE, LIKE, CASEINSENSITIVE, CI, MATCHES, CONTAINS, BEGINSWITH, ENDSWITH, BETWEEN, NULL, NIL, SELF, TRUE, YES, FALSE, NO, FIRST, LAST, SIZE, ANYKEY, SUBQUERY, CAST, TRUEPREDICATE, FALSEPREDICATE</code></p>
<h3 id="appium-predicate-helpers">Appium predicate helpers</h3>
<p>Appium has <a href="https://github.com/appium/appium-uiauto/blob/3052dace828db2ab3d722281fb7853cbcbc3252f/uiauto/appium/app.js#L68">helpers for predicate search</a> in app.js:</p>
<ul>
<li><code>getFirstWithPredicate</code></li>
<li><code>getFirstWithPredicateWeighted</code></li>
<li><code>getAllWithPredicate</code></li>
<li><code>getNameContains</code></li>
</ul>
<p>Here's a Ruby example:</p>
<pre><code class="ruby"># Ruby example
text = 'Various uses'
predicate = &quot;name contains[c] '#{text}' || label contains[c] '#{text}' || value contains[c] '#{text}'&quot;
element = execute_script(%Q(au.mainApp().getFirstWithPredicate(&quot;#{predicate}&quot;);))

puts element.name # Buttons, Various uses of UIButton
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
