<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Migrating to xcuitest - Appium</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Appium</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About appium <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../about-appium/appium-clients/">Appium clients</a>
</li>
                            
<li >
    <a href="../../about-appium/intro/">Intro</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../chromedriver/">Chromedriver</a>
</li>
                            
<li >
    <a href="../cross-domain-iframes/">Cross domain iframes</a>
</li>
                            
<li >
    <a href="../event-timings/">Event timings</a>
</li>
                            
<li >
    <a href="../grid/">Grid</a>
</li>
                            
<li >
    <a href="../hybrid/">Hybrid</a>
</li>
                            
<li >
    <a href="../ios-touch-id/">Ios touch id</a>
</li>
                            
<li >
    <a href="../ios-webkit-debug-proxy/">Ios webkit debug proxy</a>
</li>
                            
<li >
    <a href="../iwd_xcode7/">Iwd xcode7</a>
</li>
                            
<li >
    <a href="../migrating-to-1-0/">Migrating to 1 0</a>
</li>
                            
<li class="active">
    <a href="./">Migrating to xcuitest</a>
</li>
                            
<li >
    <a href="../settings/">Settings</a>
</li>
                            
<li >
    <a href="../wda-custom-server/">Wda custom server</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../contributing/appium-from-source/">Appium from source</a>
</li>
                            
<li >
    <a href="../../contributing/appium-packages/">Appium packages</a>
</li>
                            
<li >
    <a href="../../contributing/credits/">Credits</a>
</li>
                            
<li >
    <a href="../../contributing/developers-overview/">Developers overview</a>
</li>
                            
<li >
    <a href="../../contributing/gulp/">Gulp</a>
</li>
                            
<li >
    <a href="../../contributing/how-to-write-docs/">How to write docs</a>
</li>
                            
<li >
    <a href="../../contributing/style-guide-2.0/">Style guide 2.0</a>
</li>
                            
<li >
    <a href="../../contributing/style-guide/">Style guide</a>
</li>
                            
<li >
    <a href="../../contributing/version-branch-release/">Version branch release</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../setup/android-hax-emulator/">Android hax emulator</a>
</li>
                            
<li >
    <a href="../../setup/android-setup/">Android setup</a>
</li>
                            
<li >
    <a href="../../setup/ios-deploy/">Ios deploy</a>
</li>
                            
<li >
    <a href="../../setup/parallel_tests/">Parallel tests</a>
</li>
                            
<li >
    <a href="../../setup/platform-support/">Platform support</a>
</li>
                            
<li >
    <a href="../../setup/real-devices-android/">Real devices android</a>
</li>
                            
<li >
    <a href="../../setup/real-devices-ios/">Real devices ios</a>
</li>
                            
<li >
    <a href="../../setup/real-devices/">Real devices</a>
</li>
                            
<li >
    <a href="../../setup/running-on-linux/">Running on linux</a>
</li>
                            
<li >
    <a href="../../setup/running-on-osx/">Running on osx</a>
</li>
                            
<li >
    <a href="../../setup/running-on-windows/">Running on windows</a>
</li>
                            
<li >
    <a href="../../setup/troubleshooting/">Troubleshooting</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Writing and running <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../writing-and-running/appium-bindings/">Appium bindings</a>
</li>
                            
<li >
    <a href="../../writing-and-running/caps/">Caps</a>
</li>
                            
<li >
    <a href="../../writing-and-running/default-capabilities-arg/">Default capabilities arg</a>
</li>
                            
<li >
    <a href="../../writing-and-running/espresso/">Espresso</a>
</li>
                            
<li >
    <a href="../../writing-and-running/finding-elements/">Finding elements</a>
</li>
                            
<li >
    <a href="../../writing-and-running/ios-xctest-mobile-gestures/">Ios xctest mobile gestures</a>
</li>
                            
<li >
    <a href="../../writing-and-running/ios_predicate/">Ios predicate</a>
</li>
                            
<li >
    <a href="../../writing-and-running/mobile-web/">Mobile web</a>
</li>
                            
<li >
    <a href="../../writing-and-running/network_connection/">Network connection</a>
</li>
                            
<li >
    <a href="../../writing-and-running/reset-strategies/">Reset strategies</a>
</li>
                            
<li >
    <a href="../../writing-and-running/running-tests/">Running tests</a>
</li>
                            
<li >
    <a href="../../writing-and-running/safari-launcher/">Safari launcher</a>
</li>
                            
<li >
    <a href="../../writing-and-running/server-args/">Server args</a>
</li>
                            
<li >
    <a href="../../writing-and-running/touch-actions/">Touch actions</a>
</li>
                            
<li >
    <a href="../../writing-and-running/uiautomator2/">Uiautomator2</a>
</li>
                            
<li >
    <a href="../../writing-and-running/uiautomator_uiselector/">Uiautomator uiselector</a>
</li>
                            
<li >
    <a href="../../writing-and-running/unicode/">Unicode</a>
</li>
                            
<li >
    <a href="../../writing-and-running/windows-app-testing/">Windows app testing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../migrating-to-1-0/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../settings/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#migrating-your-ios-tests-from-uiautomation-ios-93-and-below-to-xcuitest-ios-93-and-up">Migrating your iOS tests from UIAutomation (iOS 9.3 and below) to XCUITest (iOS 9.3 and up)</a></li>
            <li><a href="#element-class-name-schema">Element class name schema</a></li>
            <li><a href="#page-source">Page source</a></li>
            <li><a href="#-ios-uiautomation-locator-strategy">-ios uiautomation locator strategy</a></li>
            <li><a href="#xpath-locator-strategy">xpath locator strategy</a></li>
            <li><a href="#system-dependencies">System dependencies</a></li>
            <li><a href="#api-differences">API differences</a></li>
            <li><a href="#other-known-issues">Other known issues</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="migrating-your-ios-tests-from-uiautomation-ios-93-and-below-to-xcuitest-ios-93-and-up">Migrating your iOS tests from UIAutomation (iOS 9.3 and below) to XCUITest (iOS 9.3 and up)</h2>
<p>For iOS automation, Appium relies on system frameworks provided by Apple. For iOS 9.2 and below, Apple's only automation technology was called UIAutomation, and it ran in the context of a process called "Instruments". As of iOS 10, Apple has completely removed the UIAutomation instrument, thus making it impossible for Appium to allow testing in the way it used to. Fortunately, Apple introduced a new automation technology, called XCUITest, beginning with iOS 9.3. For iOS 10 and up, this will be the only supported automation framework from Apple.</p>
<p>Appium has built in support for XCUITest beginning with Appium 1.6. For the most part, the capabilities of XCUITest match those of UIAutomation, and so the Appium team was able to ensure that test behavior will stay the same. This is one of the great things about using Appium! Even with Apple completely changing the technology your tests are using, your scripts can stay mostly the same! That being said, there are some differences you'll need to be aware of which might require modification of your test scripts if you want to run them under our XCUITest automation backend. This document will help you with those differences.</p>
<h3 id="element-class-name-schema">Element class name schema</h3>
<p>With XCUITest, Apple has given different class names to the UI elements which make up the view hierarchy. For example, <code>UIAButton</code> is now <code>XCUIElementTypeButton</code>. In many cases, there is a direct mapping between these two classes. If you use the <code>class name</code> locator strategy to find elements, Appium 1.6 will rewrite the selector for you. Likewise, if you use the <code>xpath</code> locator strategy, Appium 1.6 will find any <code>UIA*</code> elements in your XPath string and rewrite them appropriately.</p>
<p>This does not however guarantee that your tests will work exactly the same, for two reasons:</p>
<ol>
<li>The application hierarchy reported to Appium will not necessarily be identical within XCUITest to what it was within UIAutomation. If you have a path-based XPath selector, it may need to be adjusted.</li>
<li>The list of class names is not entirely identical either. Many elements are returned by XCUITest as belonging to the <code>XCUIElementTypeOther</code> class, a sort of catch-all container.</li>
</ol>
<h3 id="page-source">Page source</h3>
<p>As mentioned just above, if you rely on the app source XML from the <code>page source</code> command, the XML output will now differ significantly from what it was under UIAutomation.</p>
<h3 id="-ios-uiautomation-locator-strategy"><code>-ios uiautomation</code> locator strategy</h3>
<p>This locator strategy was specifically built on UIAutomation, so it is not included in the XCUITest automation backend. We will be working on a similar "native"-type locator strategy in coming releases.</p>
<h3 id="xpath-locator-strategy"><code>xpath</code> locator strategy</h3>
<ol>
<li>Try not to use XPath locators unless there is absolutely no other alternatives. In general, xpath locators might be times slower, than other types of locators like accessibility id, class name and predicate (up to 100 times slower in some special cases). They are so slow, because xpath location is not natively supported by Apple's XCTest framework.</li>
<li>Use</li>
</ol>
<pre><code>driver.findElement(x)
</code></pre>

<p>call instead of</p>
<pre><code>driver.findElements(x)[0]
</code></pre>

<p>to lookup single element by xpath. The more possible UI elements are matched by your locator the slower it is.
3. Be very specific when locating elements by xpath. Such locators like</p>
<pre><code>//*
</code></pre>

<p>may take minutes to complete depending on how many UI elements your application has (e. g.</p>
<pre><code>driver.findElement(By.xpath(&quot;//XCUIElementTypeButton[@value='blabla']&quot;))
</code></pre>

<p>is faster than</p>
<pre><code>driver.findElement(By.xpath(&quot;//*[@value='blabla']&quot;))
</code></pre>

<p>or</p>
<pre><code>driver.findElement(By.xpath(&quot;//XCUIElementTypeButton&quot;)))
</code></pre>

<ol>
<li>In most cases it would be faster to perform multiple nested findElement calls than to perform a single call by xpath (e.g.</li>
</ol>
<pre><code>driver.findElement(x).findElement(y)
</code></pre>

<p>is usually faster than</p>
<pre><code>driver.findElement(z)

</code></pre>

<p>where x and y are non-xpath locators and z is a xpath locator).</p>
<h3 id="system-dependencies">System dependencies</h3>
<p>In addition to the many gotchas that might come with upgrading any XCode installation (unrelated to Appium), Appium's XCUITest support requires a new system dependency: <a href="https://github.com/Carthage/Carthage">Carthage</a>. Appium Doctor has now been updated to ensure that the <code>carthage</code> binary is on your path.</p>
<h3 id="api-differences">API differences</h3>
<p>Unfortunately, the XCUITest API and the UIAutomation API are not equivalent. In many cases (like with <code>tap/click</code>), the behavior is identical. But some features that were available in the UIAutomation backend are not yet available in the new XCUITest backend. These known lacking features include:
<em> Geolocation support (e.g., <code>driver.location</code>)
</em> Shaking the device
<em> Locking the device
</em> Rotating the device (note that this is <em>NOT</em> device <em>orientation</em>, which is supported)</p>
<p>We will endeavor to add these features back in future releases of Appium.</p>
<h4 id="scrolling-and-clicking">Scrolling and clicking</h4>
<p>In the previous UIAutomation-based driver, if you tried to click on an element that wasn't in view, UIAutomation would scroll to the element automatically and then tap it. With XCUITest, this is no longer the case. You are now responsible for ensuring your element is in view before interacting with it (the same way a user would be responsible for the same).</p>
<h3 id="other-known-issues">Other known issues</h3>
<p>Finally, a list of known issues with the initial 1.6 release (we'll strike through issues which have been resolved):</p>
<ul>
<li>~~Unable to interact with elements on devices in Landscape mode (https://github.com/appium/appium/issues/6994)~~</li>
<li><code>shake</code> is not implemented due to lack of support from Apple</li>
<li><code>lock</code> is not implemented due to lack of support from Apple</li>
<li>Setting geo-location not supported due to lack of support from Apple</li>
<li>Through the TouchAction/MultiAction API, <code>zoom</code> gestures work but <code>pinch</code> gestures do not, due to an Apple issue.</li>
<li>~~Through the TouchAction/MultiAction API, <code>swipe</code> gestures are currently not supported, though they should be soon (https://github.com/appium/appium/issues/7573)~~</li>
<li>The capabilities <code>autoAcceptAlerts</code> and <code>autoDismissAlerts</code> do not currently work, and there is continued debate about whether we will be able to implement them in the future.</li>
<li>There is an issue with the iOS SDK such that PickerWheels built using certain API methods are not automatable by XCUITest. See https://github.com/appium/appium/issues/6962 for the workaround, to ensure your PickerWheels are built properly.</li>
</ul>
<p>As far as possible, we will add the missing features and fix other known issues in future versions of Appium.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
